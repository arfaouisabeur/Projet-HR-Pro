<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<VBox spacing="0"
      xmlns="http://javafx.com/javafx/17.0.12"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="edu.RhPro.controllers.employe.MesCongesController"
      style="-fx-background-color:#f3f0fa;">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- HEADER                                   -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <HBox alignment="CENTER_LEFT" spacing="16"
          style="-fx-background-color:#6d2269;
                 -fx-padding:20 30;
                 -fx-effect:dropshadow(gaussian,rgba(109,34,105,0.4),18,0,0,6);">

        <Label text="ðŸ–"  style="-fx-font-size:26px;"/>

        <VBox spacing="2">
            <Label text="Mes CongÃ©s"
                   style="-fx-font-size:22px; -fx-font-weight:900; -fx-text-fill:white;"/>
            <Label text="GÃ©rez vos demandes de congÃ©"
                   style="-fx-font-size:12px; -fx-text-fill:rgba(255,255,255,0.72);"/>
        </VBox>

        <Region HBox.hgrow="ALWAYS"/>

        <Label fx:id="lblMsg"
               style="-fx-font-size:13px; -fx-font-weight:800;
                      -fx-text-fill:white; -fx-background-color:rgba(255,255,255,0.18);
                      -fx-background-radius:20; -fx-padding:6 16;"/>
    </HBox>

    <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS"
                style="-fx-background-color:transparent; -fx-background:#f3f0fa;">
        <VBox spacing="22" style="-fx-padding:26 30;">

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- FORM CARD                               -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <VBox fx:id="formCard" spacing="20"
                  style="-fx-background-color:white;
                         -fx-background-radius:24;
                         -fx-effect:dropshadow(gaussian,rgba(109,34,105,0.10),22,0,0,6);
                         -fx-padding:28;">

                <!-- Titre form -->
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="âœš"
                           style="-fx-font-size:16px; -fx-text-fill:white;
                                  -fx-background-color:#6d2269;
                                  -fx-background-radius:50;
                                  -fx-min-width:32; -fx-min-height:32;
                                  -fx-alignment:center;"/>
                    <Label text="Nouvelle demande"
                           style="-fx-font-size:17px; -fx-font-weight:900; -fx-text-fill:#3d1a3b;"/>
                </HBox>

                <Separator style="-fx-background-color:#f0ebf9;"/>

                <!-- Ligne champs -->
                <HBox spacing="18" alignment="CENTER_LEFT">

                    <!-- Type -->
                    <VBox spacing="7" HBox.hgrow="ALWAYS">
                        <Label text="Type de congÃ©"
                               style="-fx-font-weight:800; -fx-font-size:12px; -fx-text-fill:#6d2269;"/>
                        <ComboBox fx:id="cbType"
                                  promptText="Choisir un typeâ€¦"
                                  maxWidth="Infinity"
                                  style="-fx-background-radius:14; -fx-border-radius:14;
                                         -fx-border-color:#e0d9f7; -fx-border-width:1.5;
                                         -fx-font-size:13px; -fx-padding:4 8;"/>
                        <Label fx:id="typeErrorLabel" visible="false" managed="false"
                               style="-fx-text-fill:#dc2626; -fx-font-size:11px; -fx-font-weight:700;"/>
                    </VBox>

                    <!-- Date dÃ©but -->
                    <VBox spacing="7">
                        <Label text="Date dÃ©but"
                               style="-fx-font-weight:800; -fx-font-size:12px; -fx-text-fill:#6d2269;"/>
                        <DatePicker fx:id="dpDebut"
                                    style="-fx-background-radius:14; -fx-border-radius:14;
                                           -fx-border-color:#e0d9f7; -fx-border-width:1.5;
                                           -fx-font-size:13px;"/>
                        <Label fx:id="dateDebutErrorLabel" visible="false" managed="false"
                               style="-fx-text-fill:#dc2626; -fx-font-size:11px; -fx-font-weight:700;"/>
                    </VBox>

                    <!-- Date fin -->
                    <VBox spacing="7">
                        <Label text="Date fin"
                               style="-fx-font-weight:800; -fx-font-size:12px; -fx-text-fill:#6d2269;"/>
                        <DatePicker fx:id="dpFin"
                                    style="-fx-background-radius:14; -fx-border-radius:14;
                                           -fx-border-color:#e0d9f7; -fx-border-width:1.5;
                                           -fx-font-size:13px;"/>
                        <Label fx:id="dateFinErrorLabel" visible="false" managed="false"
                               style="-fx-text-fill:#dc2626; -fx-font-size:11px; -fx-font-weight:700;"/>
                    </VBox>

                </HBox>

                <!-- Description -->
                <VBox spacing="8">
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="Description"
                               style="-fx-font-weight:800; -fx-font-size:12px; -fx-text-fill:#6d2269;"/>
                        <Button fx:id="btnGenererIA"
                                text="âœ¨ GÃ©nÃ©rer avec IA"
                                onAction="#onGenererDescription"
                                style="-fx-background-color:#6d2269; -fx-text-fill:white;
                                       -fx-font-weight:700; -fx-background-radius:20;
                                       -fx-padding:5 14; -fx-cursor:hand; -fx-font-size:12px;"/>
                        <ProgressIndicator fx:id="aiSpinner"
                                           visible="false" managed="false"
                                           prefWidth="18" prefHeight="18"/>
                    </HBox>
                    <TextArea fx:id="taDescription"
                              promptText="DÃ©crivez votre demande, ou laissez l'IA gÃ©nÃ©rerâ€¦"
                              wrapText="true" prefRowCount="3"
                              style="-fx-background-radius:14; -fx-border-radius:14;
                                     -fx-border-color:#e0d9f7; -fx-border-width:1.5;
                                     -fx-font-size:13px; -fx-padding:10;"/>
                    <Label fx:id="descErrorLabel" visible="false" managed="false"
                           style="-fx-text-fill:#dc2626; -fx-font-size:11px; -fx-font-weight:700;"/>
                </VBox>

                <!-- OCR Section -->
                <VBox fx:id="vboxOcr" spacing="12" visible="false" managed="false"
                      style="-fx-background-color:#f8f5ff;
                             -fx-background-radius:16;
                             -fx-border-color:#c4b5f4;
                             -fx-border-radius:16;
                             -fx-border-width:1.5;
                             -fx-padding:16;">

                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="ðŸ”"  style="-fx-font-size:18px;"/>
                        <Label text="Certificat MÃ©dical â€” Analyse OCR"
                               style="-fx-font-weight:900; -fx-text-fill:#6d2269; -fx-font-size:13px;"/>
                    </HBox>

                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Button fx:id="btnUploadDoc"
                                text="ðŸ“‚  Choisir le certificat"
                                onAction="#onUploadCertificat"
                                style="-fx-background-color:#6d2269; -fx-text-fill:white;
                                       -fx-font-weight:700; -fx-background-radius:20;
                                       -fx-padding:8 18; -fx-cursor:hand; -fx-font-size:12px;"/>
                        <Label fx:id="lblFichierChoisi"
                               text="Aucun fichier sÃ©lectionnÃ©"
                               style="-fx-text-fill:#9c5c9a; -fx-font-size:12px;"/>
                        <ProgressIndicator fx:id="ocrSpinner"
                                           visible="false" managed="false"
                                           prefWidth="20" prefHeight="20"/>
                    </HBox>

                    <!-- RÃ©sultat OCR -->
                    <VBox fx:id="vboxOcrResult" spacing="10" visible="false" managed="false"
                          style="-fx-background-color:white;
                                 -fx-background-radius:12;
                                 -fx-border-color:#a78bfa;
                                 -fx-border-radius:12;
                                 -fx-border-width:1.5;
                                 -fx-padding:14;">

                        <Label text="ðŸ”  RÃ©sultat de l'analyse"
                               style="-fx-font-weight:900; -fx-text-fill:#6d2269; -fx-font-size:13px;"/>

                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="ðŸ‘¨â€âš•ï¸ MÃ©decin :"
                                   style="-fx-font-weight:700; -fx-font-size:12px; -fx-text-fill:#555;"/>
                            <Label fx:id="lblMedecin" text="â€”"
                                   style="-fx-font-size:13px; -fx-font-weight:bold; -fx-text-fill:#059669;"/>
                        </HBox>

                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="ðŸ“… PÃ©riode :"
                                   style="-fx-font-weight:700; -fx-font-size:12px; -fx-text-fill:#555;"/>
                            <Label fx:id="lblPeriodeOcr" text="â€”"
                                   style="-fx-font-size:13px; -fx-font-weight:bold; -fx-text-fill:#059669;"/>
                        </HBox>

                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="âœ” Statut :"
                                   style="-fx-font-weight:700; -fx-font-size:12px; -fx-text-fill:#555;"/>
                            <Label fx:id="lblOcrStatut" text="â€”"
                                   style="-fx-font-size:13px; -fx-font-weight:bold;"/>
                        </HBox>

                        <Button fx:id="btnAppliquerOcr"
                                text="âš¡  Appliquer les dates dÃ©tectÃ©es"
                                onAction="#onAppliquerDatesOcr"
                                visible="false" managed="false"
                                style="-fx-background-color:#059669; -fx-text-fill:white;
                                       -fx-font-weight:700; -fx-background-radius:20;
                                       -fx-padding:8 18; -fx-cursor:hand; -fx-font-size:12px;"/>
                    </VBox>
                </VBox>

                <!-- Bouton submit -->
                <HBox alignment="CENTER_LEFT" spacing="0">
                    <Button text="ðŸ“©  Envoyer la demande"
                            onAction="#onSubmit"
                            style="-fx-background-color:#6d2269; -fx-text-fill:white;
                                   -fx-font-weight:900; -fx-background-radius:30;
                                   -fx-padding:13 28; -fx-cursor:hand; -fx-font-size:14px;
                                   -fx-effect:dropshadow(gaussian,rgba(109,34,105,0.35),12,0,0,3);"/>
                </HBox>

            </VBox>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- HISTORIQUE                              -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <VBox spacing="16"
                  style="-fx-background-color:white;
                         -fx-background-radius:24;
                         -fx-effect:dropshadow(gaussian,rgba(109,34,105,0.10),22,0,0,6);
                         -fx-padding:28;">

                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="ðŸ“‹"  style="-fx-font-size:18px;"/>
                    <Label text="Historique de mes demandes"
                           style="-fx-font-size:17px; -fx-font-weight:900; -fx-text-fill:#3d1a3b;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="ðŸ”„  RafraÃ®chir"
                            onAction="#refresh"
                            style="-fx-background-color:#f0ebf9; -fx-text-fill:#6d2269;
                                   -fx-font-weight:800; -fx-background-radius:20;
                                   -fx-padding:7 16; -fx-cursor:hand; -fx-font-size:12px;"/>
                </HBox>

                <Separator style="-fx-background-color:#f0ebf9;"/>

                <VBox fx:id="cardContainer" spacing="14">
                    <padding>
                        <Insets top="4" right="4" bottom="4" left="4"/>
                    </padding>
                </VBox>

            </VBox>

        </VBox>
    </ScrollPane>

</VBox>
