<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<VBox xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="edu.RhPro.controllers.rh.OffresManageController"
      spacing="14">

    <HBox spacing="10" alignment="CENTER_LEFT">
        <Label text="Gestion des Offres"
               style="-fx-font-size:20px; -fx-font-weight:900; -fx-text-fill:#111827;"/>

        <Region HBox.hgrow="ALWAYS"/>

        <Button onAction="#onShowStats"
                prefWidth="50" prefHeight="50"
                style="-fx-background-color: linear-gradient(to right, #6d2a74, #8b3a8f);
                       -fx-background-radius: 50;
                       -fx-cursor: hand;
                       -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.25), 10, 0, 0, 3);">
            <graphic>
                <FontIcon iconLiteral="fas-chart-pie" iconSize="26" iconColor="white"/>
            </graphic>
            <tooltip>
                <Tooltip text="Voir les statistiques des offres"/>
            </tooltip>
        </Button>
    </HBox>

    <HBox spacing="16">

        <TableView fx:id="offreTable" prefHeight="560"
                   style="-fx-background-color:white; -fx-background-radius:18; -fx-border-radius:18; -fx-border-color:#ececf5; -fx-padding:8;">
            <columns>
                <TableColumn fx:id="colId" text="ID" prefWidth="60"/>
                <TableColumn fx:id="colTitre" text="Titre" prefWidth="260"/>
                <TableColumn fx:id="colLoc" text="Localisation" prefWidth="160"/>
                <TableColumn fx:id="colType" text="Contrat" prefWidth="140"/>
                <TableColumn fx:id="colPub" text="Publication" prefWidth="130"/>
                <TableColumn fx:id="colExp" text="Expiration" prefWidth="130"/>
                <TableColumn fx:id="colStatut" text="Statut" prefWidth="100"/>
            </columns>
        </TableView>

        <VBox spacing="10" prefWidth="420"
              style="-fx-padding:16; -fx-background-color:white; -fx-background-radius:18; -fx-border-radius:18; -fx-border-color:#ececf5;">

            <Label text="Formulaire Offre" style="-fx-font-weight:900; -fx-font-size:14;"/>

            <TextField fx:id="titreField" promptText="Titre"
                       style="-fx-background-radius:14; -fx-border-radius:14; -fx-border-color:#ececf5; -fx-padding:12;"/>
            <Label fx:id="titreErrorLabel" textFill="red" visible="false" managed="false"/>

            <TextField fx:id="locField" promptText="Localisation"
                       style="-fx-background-radius:14; -fx-border-radius:14; -fx-border-color:#ececf5; -fx-padding:12;"/>
            <Label fx:id="locErrorLabel" textFill="red" visible="false" managed="false"/>

            <TextField fx:id="typeField" promptText="Type contrat (CDI, CDD, Stage...)"
                       style="-fx-background-radius:14; -fx-border-radius:14; -fx-border-color:#ececf5; -fx-padding:12;"/>
            <Label fx:id="typeErrorLabel" textFill="red" visible="false" managed="false"/>

            <DatePicker fx:id="pubPicker" promptText="Date publication"/>
            <Label fx:id="pubErrorLabel" textFill="red" visible="false" managed="false"/>

            <DatePicker fx:id="expPicker" promptText="Date expiration"/>
            <Label fx:id="expErrorLabel" textFill="red" visible="false" managed="false"/>

            <ComboBox fx:id="statutBox" promptText="Statut"/>
            <Label fx:id="statutErrorLabel" textFill="red" visible="false" managed="false"/>

            <TextArea fx:id="descArea" promptText="Description" prefHeight="160" wrapText="true"
                      style="-fx-background-radius:14; -fx-border-radius:14; -fx-border-color:#ececf5; -fx-padding:10;"/>
            <Label fx:id="descErrorLabel" textFill="red" visible="false" managed="false"/>

            <HBox spacing="10">
                <Button text="âž• Ajouter" onAction="#onAdd"
                        style="-fx-background-color:#111827; -fx-text-fill:white; -fx-background-radius:14; -fx-padding:12 14; -fx-font-weight:900;"/>
                <Button text="âœ Modifier" onAction="#onUpdate"
                        style="-fx-background-color:#2563eb; -fx-text-fill:white; -fx-background-radius:14; -fx-padding:12 14; -fx-font-weight:900;"/>
            </HBox>

            <HBox spacing="10">
                <Button text="ðŸ—‘ Supprimer" onAction="#onDelete"
                        style="-fx-background-color:#b91c1c; -fx-text-fill:white; -fx-background-radius:14; -fx-padding:12 14; -fx-font-weight:900;"/>
                <Button text="ðŸ”’ Fermer" onAction="#onClose"
                        style="-fx-background-color:#6b7280; -fx-text-fill:white; -fx-background-radius:14; -fx-padding:12 14; -fx-font-weight:900;"/>
            </HBox>

            <Button text="ðŸ”„ RafraÃ®chir" onAction="#refresh"
                    style="-fx-background-color:white; -fx-border-color:#ececf5; -fx-background-radius:14; -fx-border-radius:14; -fx-padding:12 14; -fx-font-weight:900;"/>

            <Label fx:id="msgLabel" text="" style="-fx-text-fill:#6b7280;"/>
        </VBox>

    </HBox>
</VBox>
