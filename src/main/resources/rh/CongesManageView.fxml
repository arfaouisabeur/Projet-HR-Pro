<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<VBox spacing="0"
      style="-fx-background-color:#f3f0fa;"
      xmlns="http://javafx.com/javafx/17.0.12"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="edu.RhPro.controllers.rh.CongesManageController">

    <!-- HEADER -->
    <HBox alignment="CENTER_LEFT" spacing="20"
          style="-fx-background-color:#6d2269; -fx-padding:18 30;
                 -fx-effect:dropshadow(gaussian,rgba(109,34,105,0.35),18,0,0,6);">
        <Label text="ðŸ—‚" style="-fx-font-size:28px;"/>
        <VBox spacing="2">
            <Label text="Gestion des CongÃ©s"
                   style="-fx-font-size:22px; -fx-font-weight:900; -fx-text-fill:white;"/>
            <Label text="Demandes en attente de dÃ©cision"
                   style="-fx-font-size:12px; -fx-text-fill:rgba(255,255,255,0.75);"/>
        </VBox>
        <Region HBox.hgrow="ALWAYS"/>
        <VBox alignment="CENTER"
              style="-fx-background-color:rgba(255,255,255,0.18); -fx-background-radius:14; -fx-padding:8 18;">
            <Label fx:id="msgLabel" text="â€” demande(s)"
                   style="-fx-font-size:13px; -fx-font-weight:800; -fx-text-fill:white;"/>
        </VBox>
    </HBox>

    <!-- TOOLBAR -->
    <HBox alignment="CENTER_LEFT" spacing="12"
          style="-fx-background-color:white; -fx-padding:14 30;
                 -fx-border-color:#ede9f6; -fx-border-width:0 0 1.5 0;">
        <Label text="CritÃ¨re :"
               style="-fx-font-weight:700; -fx-text-fill:#6d2269; -fx-font-size:13px;"/>
        <ComboBox fx:id="cbCriteria" prefWidth="140"
                  style="-fx-background-radius:20; -fx-border-radius:20;
                         -fx-border-color:#ddd6fe; -fx-background-color:white; -fx-font-size:13px;"/>
        <TextField fx:id="tfSearch" prefWidth="220" promptText="ðŸ”  Rechercher..."
                   style="-fx-background-radius:20; -fx-border-radius:20;
                          -fx-border-color:#ddd6fe; -fx-padding:8 14; -fx-font-size:13px;"/>
        <Button text="Filtrer â†‘â†“" onAction="#onFilter"
                style="-fx-background-color:#6d2269; -fx-text-fill:white; -fx-font-weight:800;
                       -fx-background-radius:20; -fx-padding:8 18; -fx-cursor:hand; -fx-font-size:12px;"/>
        <Button text="â†º Reset" onAction="#onReset"
                style="-fx-background-color:#ede9f6; -fx-text-fill:#6d2269; -fx-font-weight:800;
                       -fx-background-radius:20; -fx-padding:8 18; -fx-cursor:hand; -fx-font-size:12px;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="ðŸ“… Jours fÃ©riÃ©s" onAction="#onShowJoursFeries"
                style="-fx-background-color:#fff7ed; -fx-text-fill:#ea580c; -fx-font-weight:800;
                       -fx-background-radius:20; -fx-padding:8 18; -fx-cursor:hand; -fx-font-size:12px;
                       -fx-border-color:#fed7aa; -fx-border-width:1.5; -fx-border-radius:20;"/>
    </HBox>

    <!-- CONTENU PRINCIPAL â€” scroll vertical page -->
    <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS"
                style="-fx-background-color:transparent; -fx-background:#f3f0fa;
                       -fx-border-color:transparent;">

        <HBox spacing="18" style="-fx-padding:18 22;">

            <!-- GAUCHE : TABLE -->
            <VBox spacing="12" HBox.hgrow="ALWAYS" minHeight="500"
                  style="-fx-background-color:white; -fx-background-radius:20;
                         -fx-effect:dropshadow(gaussian,rgba(109,34,105,0.10),18,0,0,5);
                         -fx-padding:20;">
                <Label text="ðŸ“‹  Liste des demandes"
                       style="-fx-font-size:15px; -fx-font-weight:900; -fx-text-fill:#6d2269;"/>

                <!-- ScrollPane horizontal autour de la TableView -->
                <ScrollPane fitToHeight="true" VBox.vgrow="ALWAYS"
                            hbarPolicy="AS_NEEDED" vbarPolicy="AS_NEEDED"
                            style="-fx-background-color:transparent; -fx-border-color:transparent;
                                   -fx-background:#f3f0fa;">

                    <TableView fx:id="table" prefHeight="450"
                               style="-fx-background-radius:14; -fx-border-radius:14;
                                      -fx-border-color:#ede9f6; -fx-border-width:1.5;
                                      -fx-table-cell-border-color:transparent;
                                      -fx-selection-bar:#ddd6fe;
                                      -fx-selection-bar-non-focused:#ede9f6; -fx-font-size:13px;">
                        <columns>
                            <TableColumn fx:id="colId"      text="ID"          prefWidth="60"  minWidth="55"/>
                            <TableColumn fx:id="colEmploye" text="EmployÃ©"     prefWidth="90"  minWidth="75"/>
                            <TableColumn fx:id="colType"    text="Type"        prefWidth="170" minWidth="140"/>
                            <TableColumn fx:id="colDebut"   text="DÃ©but"       prefWidth="110" minWidth="95"/>
                            <TableColumn fx:id="colFin"     text="Fin"         prefWidth="110" minWidth="95"/>
                            <TableColumn fx:id="colDesc"    text="Description" prefWidth="220" minWidth="160"/>
                        </columns>
                        <placeholder>
                            <Label text="âœ…  Aucune demande en attente"
                                   style="-fx-text-fill:#aaa; -fx-font-size:14px; -fx-font-weight:700;"/>
                        </placeholder>
                    </TableView>
                </ScrollPane>
            </VBox>

            <!-- DROITE : DÃ‰CISION RH -->
            <VBox spacing="14" prefWidth="340" minWidth="330"
                  style="-fx-background-color:white; -fx-background-radius:20;
                         -fx-effect:dropshadow(gaussian,rgba(109,34,105,0.10),18,0,0,5);
                         -fx-padding:22;">

                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="âš–" style="-fx-font-size:22px;"/>
                    <Label text="DÃ©cision RH"
                           style="-fx-font-size:17px; -fx-font-weight:900; -fx-text-fill:#6d2269;"/>
                </HBox>

                <Separator style="-fx-background-color:#ede9f6;"/>

                <!-- Info sÃ©lection -->
                <VBox spacing="8"
                      style="-fx-background-color:#f8f5fd; -fx-background-radius:14; -fx-padding:14;
                             -fx-border-color:#ddd6fe; -fx-border-radius:14; -fx-border-width:1;">
                    <Label text="Demande sÃ©lectionnÃ©e"
                           style="-fx-font-size:11px; -fx-text-fill:#9c5c9a; -fx-font-weight:700;"/>
                    <Label fx:id="lblSelectionInfo"
                           text="Cliquez sur une ligne dans le tableau"
                           wrapText="true"
                           style="-fx-font-size:12px; -fx-text-fill:#555; -fx-line-spacing:3;"/>
                    <Button fx:id="btnAnalyse" text="ðŸ” Voir rÃ¨gles &amp; jours fÃ©riÃ©s"
                            onAction="#onShowAnalyse"
                            visible="false" managed="false"
                            maxWidth="Infinity"
                            style="-fx-background-color:#6d2269; -fx-text-fill:white;
                                   -fx-font-weight:800; -fx-background-radius:14;
                                   -fx-padding:8 14; -fx-cursor:hand; -fx-font-size:12px;"/>
                </VBox>

                <!-- Certificat OCR -->
                <VBox fx:id="vboxCertifInfo" spacing="8" visible="false" managed="false"
                      style="-fx-background-color:#f0fdf4; -fx-background-radius:14; -fx-padding:14;
                             -fx-border-color:#86efac; -fx-border-radius:14; -fx-border-width:1;">
                    <Label text="ðŸ”  Certificat mÃ©dical"
                           style="-fx-font-size:11px; -fx-text-fill:#166534; -fx-font-weight:700;"/>
                    <Label fx:id="lblCertifStatus" text="-" wrapText="true"
                           style="-fx-font-size:12px; -fx-text-fill:#166534; -fx-font-weight:600;"/>
                    <Button fx:id="btnVoirCertifPanel" text="ðŸ“Ž Ouvrir le certificat"
                            onAction="#onOuvrirCertificat"
                            visible="false" managed="false"
                            style="-fx-background-color:#6d2269; -fx-text-fill:white;
                                   -fx-font-weight:700; -fx-background-radius:14;
                                   -fx-padding:6 14; -fx-cursor:hand; -fx-font-size:11px;"/>
                </VBox>

                <!-- RÃ©sumÃ© durÃ©e/limite -->
                <VBox fx:id="vboxResumeDuree" spacing="8" visible="false" managed="false"
                      style="-fx-background-color:#f8f5ff; -fx-background-radius:14; -fx-padding:14;
                             -fx-border-color:#ddd6fe; -fx-border-radius:14; -fx-border-width:1;">
                    <Label text="ðŸ“Š  Analyse rapide"
                           style="-fx-font-size:11px; -fx-text-fill:#6d2269; -fx-font-weight:700;"/>
                    <HBox spacing="8" alignment="CENTER_LEFT">
                        <Label fx:id="lblJoursCal" text=""
                               style="-fx-background-color:#ede9f6; -fx-text-fill:#6d2269;
                                      -fx-background-radius:12; -fx-padding:4 12;
                                      -fx-font-size:12px; -fx-font-weight:800;"/>
                        <Label fx:id="lblJoursOuv" text=""
                               style="-fx-background-color:#d1fae5; -fx-text-fill:#059669;
                                      -fx-background-radius:12; -fx-padding:4 12;
                                      -fx-font-size:12px; -fx-font-weight:800;"/>
                    </HBox>
                    <Label fx:id="lblRegleStatut" text="" wrapText="true"
                           style="-fx-font-size:12px; -fx-font-weight:800; -fx-background-radius:10; -fx-padding:8 12;"/>
                    <Label fx:id="lblFeriesResume" text="" wrapText="true"
                           visible="false" managed="false"
                           style="-fx-font-size:12px; -fx-text-fill:#ea580c; -fx-font-weight:700;
                                  -fx-background-color:#fff7ed; -fx-background-radius:10; -fx-padding:8 12;"/>
                </VBox>

                <!-- Commentaire -->
                <VBox spacing="8" VBox.vgrow="ALWAYS">
                    <Label text="ðŸ’¬  Commentaire"
                           style="-fx-font-weight:800; -fx-text-fill:#3d1a3b; -fx-font-size:13px;"/>
                    <TextArea fx:id="taCommentaire" VBox.vgrow="ALWAYS"
                              wrapText="true"
                              promptText="Saisir un commentaire pour l'employÃ©..."
                              style="-fx-background-radius:14; -fx-border-radius:14;
                                     -fx-border-color:#ddd6fe; -fx-border-width:1.5;
                                     -fx-padding:10; -fx-font-size:13px;"/>
                </VBox>

                <!-- Boutons -->
                <VBox spacing="10">
                    <Button text="âœ…  Accepter la demande"
                            onAction="#onAccept" maxWidth="Infinity"
                            style="-fx-background-color:#6d2269; -fx-text-fill:white;
                                   -fx-font-weight:900; -fx-background-radius:22;
                                   -fx-padding:13 0; -fx-cursor:hand; -fx-font-size:13px;
                                   -fx-effect:dropshadow(gaussian,rgba(109,34,105,0.3),10,0,0,3);"/>
                    <Button text="âŒ  Refuser la demande"
                            onAction="#onRefuse" maxWidth="Infinity"
                            style="-fx-background-color:#1a0a1a; -fx-text-fill:white;
                                   -fx-font-weight:900; -fx-background-radius:22;
                                   -fx-padding:13 0; -fx-cursor:hand; -fx-font-size:13px;"/>
                    <Button text="ðŸ’¬  Enregistrer commentaire"
                            onAction="#onComment" maxWidth="Infinity"
                            style="-fx-background-color:#ede9f6; -fx-text-fill:#6d2269;
                                   -fx-font-weight:900; -fx-background-radius:22;
                                   -fx-padding:13 0; -fx-cursor:hand; -fx-font-size:13px;
                                   -fx-border-color:#ddd6fe; -fx-border-width:1.5; -fx-border-radius:22;"/>
                </VBox>

            </VBox>
        </HBox>
    </ScrollPane>

</VBox>
